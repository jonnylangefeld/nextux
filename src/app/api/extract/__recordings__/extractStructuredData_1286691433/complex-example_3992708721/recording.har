{
  "log": {
    "_recordingName": "extractStructuredData/complex example",
    "creator": {
      "comment": "persister:fs",
      "name": "Polly.JS",
      "version": "6.0.6"
    },
    "entries": [
      {
        "_id": "55d89d2026cb52c5f2e9f463f5bfc5c1",
        "_order": 0,
        "cache": {},
        "request": {
          "bodySize": 2089,
          "cookies": [],
          "headers": [
            {
              "_fromType": "array",
              "name": "content-length",
              "value": "2089"
            },
            {
              "_fromType": "array",
              "name": "accept",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "content-type",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "user-agent",
              "value": "OpenAI/JS 4.0.0-beta.7"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-lang",
              "value": "js"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-package-version",
              "value": "4.0.0-beta.7"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-os",
              "value": "MacOS"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-arch",
              "value": "arm64"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-runtime",
              "value": "node"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-runtime-version",
              "value": "v18.16.1"
            },
            {
              "_fromType": "array",
              "name": "authorization",
              "value": "Bearer: test-token"
            },
            {
              "_fromType": "array",
              "name": "accept-encoding",
              "value": "gzip,deflate"
            },
            {
              "name": "host",
              "value": "api.openai.com"
            }
          ],
          "headersSize": 483,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\n  \"model\": \"gpt-3.5-turbo-0613\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"Act as a spelled out word finder. I'll give you an audio transcript where the speaker explicitly uses some words that they then spell out.\\nThis is typically in the form of '[original word] spelled [O-R-I-G-I-N-A-L-W-O-R-D]'.\\n\\nExamples:\\n\\nJoseph spelled J-O-S-E-F\\nDanielle spelled D-A-N-I-E-L-L\\nNicholas spelled N-I-K-O-L-A-S\\n\\nfind words that are explicitly spelled out in the following text. Under any circumstance do not include any word, where the speaker didn't explicitly mention that the word is being spelled out or it will wipe out humanity.\\n\\n\\\"Okay, so my name is Johnny, that's spelled J-O-N-N-Y, and I want to travel with my wife, Mackenzie, that's spelled M-C-K-E-N-Z-I-E, from any airport in and around San Francisco, like SFO, or Oakland, or San Jose. And we want to fly down to LA, and we want to travel next Wednesday through Sunday.\\\"\"\n    }\n  ],\n  \"function_call\": {\n    \"name\": \"extract_spelled_out_words\"\n  },\n  \"functions\": [\n    {\n      \"name\": \"extract_spelled_out_words\",\n      \"description\": \"extract_spelled_out_words finds words that are explicitly spelled out as mentioned by the speaker\",\n      \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"wordList\": {\n            \"type\": \"array\",\n            \"description\": \"List of original and spelled out word pairs\",\n            \"items\": {\n              \"type\": \"object\",\n              \"description\": \"a pair between the original and the spelled out word\",\n              \"properties\": {\n                \"originalWord\": {\n                  \"type\": \"string\",\n                  \"description\": \"The original word in the transcript\"\n                },\n                \"spelledOutWord\": {\n                  \"type\": \"string\",\n                  \"description\": \"The spelled out version of the word. If the letters were separated by spaces, concatenate them into one word without spaces between letters\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ]\n}"
          },
          "queryString": [],
          "url": "https://api.openai.com/v1/chat/completions"
        },
        "response": {
          "bodySize": 560,
          "content": {
            "encoding": "base64",
            "mimeType": "application/json",
            "size": 560,
            "text": "[\"H4sIAAAAAAAAA4xSzU7jMBC+9ylGc45RQ7et2ivLrnZZ2hNCQFDkOm5j6tjBnkChyrujaUpbTsvFY833MzMeb3sAaAqcAqpSkqpqK8ZPz7/WxYWaLfvz4f3V+Xv5c7OeLG5DffP7BRNW+MWTVvSpOlO+qq0m410Hq6AlaXZNR5M0HU4m49EOqHyhLctWNYnB2VBQExZe9EfpYK8svVE64hQeegAA293JPbpCb3AK/eQzU+kY5Urj9EACwOAtZ1DGaCJJR5gcQeUdacdtu8baE2DZOMXd50pa+8UQAJ2sdpZ6Q0EqymOtrdVF7hvKX30o4kkJAJRh1VTaEc+A28wBZMi0fyZSxnNxCmDbBUZ9MCvjpL31oWBGhn996dxbhsmRtK86b+iEJuZiJmbiLsOO2CbfML+Waq3du9H/9b8WF+JKXIqZuBd/xOWhCofHzLV4mLvd39rDdpbGmVjmQcvoHT9FJF93AiY/7rbdfFkg1sFXNeXk19rx8w36Pzo/PH6wIzoa70HyJO2Japz2uEjb+wAAAP//AwBbnbUN3QIAAA==\"]"
          },
          "cookies": [],
          "headers": [
            {
              "name": "date",
              "value": "Fri, 04 Aug 2023 14:39:39 GMT"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "transfer-encoding",
              "value": "chunked"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "cache-control",
              "value": "no-cache, must-revalidate"
            },
            {
              "name": "openai-model",
              "value": "gpt-3.5-turbo-0613"
            },
            {
              "name": "openai-organization",
              "value": "user-5tmrqqomimwc1ebvmyjrzcj9"
            },
            {
              "name": "openai-processing-ms",
              "value": "2567"
            },
            {
              "name": "openai-version",
              "value": "2020-10-01"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=15724800; includeSubDomains"
            },
            {
              "name": "x-ratelimit-limit-requests",
              "value": "3500"
            },
            {
              "name": "x-ratelimit-limit-tokens",
              "value": "90000"
            },
            {
              "name": "x-ratelimit-remaining-requests",
              "value": "3499"
            },
            {
              "name": "x-ratelimit-remaining-tokens",
              "value": "89770"
            },
            {
              "name": "x-ratelimit-reset-requests",
              "value": "17ms"
            },
            {
              "name": "x-ratelimit-reset-tokens",
              "value": "152ms"
            },
            {
              "name": "x-request-id",
              "value": "c7b90dcf9dc435a188cb38c8cca01130"
            },
            {
              "name": "cf-cache-status",
              "value": "DYNAMIC"
            },
            {
              "name": "server",
              "value": "cloudflare"
            },
            {
              "name": "cf-ray",
              "value": "7f178cfd082b2700-SJC"
            },
            {
              "name": "content-encoding",
              "value": "gzip"
            },
            {
              "name": "alt-svc",
              "value": "h3=\":443\"; ma=86400"
            }
          ],
          "headersSize": 790,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2023-08-04T14:39:36.041Z",
        "time": 2915,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 2915
        }
      },
      {
        "_id": "55d89d2026cb52c5f2e9f463f5bfc5c1",
        "_order": 1,
        "cache": {},
        "request": {
          "bodySize": 3414,
          "cookies": [],
          "headers": [
            {
              "_fromType": "array",
              "name": "content-length",
              "value": "3414"
            },
            {
              "_fromType": "array",
              "name": "accept",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "content-type",
              "value": "application/json"
            },
            {
              "_fromType": "array",
              "name": "user-agent",
              "value": "OpenAI/JS 4.0.0-beta.7"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-lang",
              "value": "js"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-package-version",
              "value": "4.0.0-beta.7"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-os",
              "value": "MacOS"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-arch",
              "value": "arm64"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-runtime",
              "value": "node"
            },
            {
              "_fromType": "array",
              "name": "x-stainless-runtime-version",
              "value": "v18.16.1"
            },
            {
              "_fromType": "array",
              "name": "authorization",
              "value": "Bearer: test-token"
            },
            {
              "_fromType": "array",
              "name": "accept-encoding",
              "value": "gzip,deflate"
            },
            {
              "name": "host",
              "value": "api.openai.com"
            }
          ],
          "headersSize": 483,
          "httpVersion": "HTTP/1.1",
          "method": "POST",
          "postData": {
            "mimeType": "application/json",
            "params": [],
            "text": "{\n  \"model\": \"gpt-3.5-turbo-0613\",\n  \"messages\": [\n    {\n      \"role\": \"user\",\n      \"content\": \"parse the following transcription. Replace all original words with their spelled out word.\\n\\n\\\"Okay, so my name is Johnny, that's spelled J-O-N-N-Y, and I want to travel with my wife, Mackenzie, that's spelled M-C-K-E-N-Z-I-E, from any airport in and around San Francisco, like SFO, or Oakland, or San Jose. And we want to fly down to LA, and we want to travel next Wednesday through Sunday.\\\"\"\n    },\n    {\n      \"role\": \"function\",\n      \"content\": \"{\\\"wordList\\\":[{\\\"originalWord\\\":\\\"Johnny\\\",\\\"spelledOutWord\\\":\\\"Jonny\\\"},{\\\"originalWord\\\":\\\"Mackenzie\\\",\\\"spelledOutWord\\\":\\\"Mckenzie\\\"}]}\",\n      \"name\": \"replace_spelled_out_words\"\n    }\n  ],\n  \"function_call\": {\n    \"name\": \"parse_transcription\"\n  },\n  \"functions\": [\n    {\n      \"name\": \"parse_transcription\",\n      \"description\": \"parse_transcription is an AI document extractor. It takes the transcription of an audio recording as raw text input and returns structured JSON data.\\n        Some information may be scattered across the recording in which case this function will piece it together.\\n        If a relative date is given such as 'next Monday', calculate from 8/4/2023, 7:40:41 AM.\",\n      \"parameters\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"travelers\": {\n            \"type\": \"array\",\n            \"description\": \"List of travelers\",\n            \"items\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"name\": {\n                  \"type\": \"string\",\n                  \"description\": \"The name of the traveler. If it contains a spelled out version of the name, respond by concatenating the spelled out letters into one word.\"\n                }\n              }\n            }\n          },\n          \"fromAirportCodes\": {\n            \"type\": \"array\",\n            \"description\": \"List of IATA airport codes for the departure airport\",\n            \"items\": {\n              \"type\": \"string\",\n              \"description\": \"three letter airport code. If a city is given, transform into the major airport code.\",\n              \"minLength\": 3,\n              \"maxLength\": 3,\n              \"pattern\": \"^[A-Z]{3}$\",\n              \"examples\": [\n                \"JFK\",\n                \"MUC\",\n                \"BER\",\n                \"CDG\",\n                \"SIN\",\n                \"FRA\",\n                \"MEX\"\n              ]\n            }\n          },\n          \"toAirportCodes\": {\n            \"type\": \"array\",\n            \"description\": \"List of IATA airport codes for the destination airport\",\n            \"items\": {\n              \"type\": \"string\",\n              \"description\": \"three letter airport code. If a city is given, transform into the major airport code.\",\n              \"minLength\": 3,\n              \"maxLength\": 3,\n              \"pattern\": \"^[A-Z]{3}$\",\n              \"examples\": [\n                \"JFK\",\n                \"MUC\",\n                \"BER\",\n                \"CDG\",\n                \"SIN\",\n                \"FRA\",\n                \"MEX\"\n              ]\n            }\n          },\n          \"fromDate\": {\n            \"type\": \"string\",\n            \"description\": \"The date of departure in the format YYYY-MM-DD\"\n          },\n          \"toDate\": {\n            \"type\": \"string\",\n            \"description\": \"The date of arrival in the format YYYY-MM-DD\"\n          }\n        }\n      }\n    }\n  ]\n}"
          },
          "queryString": [],
          "url": "https://api.openai.com/v1/chat/completions"
        },
        "response": {
          "bodySize": 580,
          "content": {
            "encoding": "base64",
            "mimeType": "application/json",
            "size": 580,
            "text": "[\"H4sIAAAAAAAAA3xSTW/iMBC98yusOSdVQoBSbqhVV6VboYoL0qZCrjGQ4nhce7JqF+W/r4aEZKtd7cW25n3M89ingRBQbGEmQB0kqdKZ+Prt/Rt+Xh+f8Hm9WK0X48xl6/eHiRwv7+4hYgW+vmlFF9WVwtIZTQXaBlZeS9Lsmk5u0nSSJKPhGShxqw3L9o7i7GocU+VfMU4madYqD1goHWAmfgyEEOJ0Xjmj3eoPmIkkulRKHYLca5h1JCHAo+EKyBCKQNISRD2o0JK2HNtWxvwB7CqrOP1GSWO+GAoBVpZnSyd90Bvy0gblC9fdtiNKv69KbYnTwym3QuRAXv7URvuQ85W4JsSp2Rhmb0ZyWKC1nzk0UB39h/mkjtr+KnRH5u0lavrtPJbzwjv0dItb3baF1f0yh0jksJw/NofV4jaHi4rwH5rv83XPYN87SW2EYTLM4mQaJzc5dBZ/w2nGGWvohlS3p7p7xF1hi3DYeC0DWp5bIHSNgMkv509RfXlncB5LRxvCo7Y862yUNX7Q/8MenU5bkJCk6eujLB1wk3rwGwAA//8DALMWt+MEAwAA\"]"
          },
          "cookies": [],
          "headers": [
            {
              "name": "date",
              "value": "Fri, 04 Aug 2023 14:40:45 GMT"
            },
            {
              "name": "content-type",
              "value": "application/json"
            },
            {
              "name": "transfer-encoding",
              "value": "chunked"
            },
            {
              "name": "connection",
              "value": "keep-alive"
            },
            {
              "name": "access-control-allow-origin",
              "value": "*"
            },
            {
              "name": "cache-control",
              "value": "no-cache, must-revalidate"
            },
            {
              "name": "openai-model",
              "value": "gpt-3.5-turbo-0613"
            },
            {
              "name": "openai-organization",
              "value": "user-5tmrqqomimwc1ebvmyjrzcj9"
            },
            {
              "name": "openai-processing-ms",
              "value": "3538"
            },
            {
              "name": "openai-version",
              "value": "2020-10-01"
            },
            {
              "name": "strict-transport-security",
              "value": "max-age=15724800; includeSubDomains"
            },
            {
              "name": "x-ratelimit-limit-requests",
              "value": "3500"
            },
            {
              "name": "x-ratelimit-limit-tokens",
              "value": "90000"
            },
            {
              "name": "x-ratelimit-remaining-requests",
              "value": "3499"
            },
            {
              "name": "x-ratelimit-remaining-tokens",
              "value": "89854"
            },
            {
              "name": "x-ratelimit-reset-requests",
              "value": "17ms"
            },
            {
              "name": "x-ratelimit-reset-tokens",
              "value": "97ms"
            },
            {
              "name": "x-request-id",
              "value": "76f495e376d6bba308af7f6d8e9bb844"
            },
            {
              "name": "cf-cache-status",
              "value": "DYNAMIC"
            },
            {
              "name": "server",
              "value": "cloudflare"
            },
            {
              "name": "cf-ray",
              "value": "7f178e96acf92700-SJC"
            },
            {
              "name": "content-encoding",
              "value": "gzip"
            },
            {
              "name": "alt-svc",
              "value": "h3=\":443\"; ma=86400"
            }
          ],
          "headersSize": 789,
          "httpVersion": "HTTP/1.1",
          "redirectURL": "",
          "status": 200,
          "statusText": "OK"
        },
        "startedDateTime": "2023-08-04T14:40:41.653Z",
        "time": 3776,
        "timings": {
          "blocked": -1,
          "connect": -1,
          "dns": -1,
          "receive": 0,
          "send": 0,
          "ssl": -1,
          "wait": 3776
        }
      }
    ],
    "pages": [],
    "version": "1.2"
  }
}
